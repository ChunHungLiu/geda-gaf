dnl Process this file with autoconf to produce a configure script.


dnl Some of our own macros
AC_DEFUN(GEDA_DECLARE_SYMLIB,
 [
	data$1=`ls -1 $srcdir/$1 | grep -v Makefile \
				 | grep -v CVS | grep -v "\\.cvsignore" \
				 | grep -v "\\~" | grep -v "\\.orig"`
	data$1=`echo $data$1`
 ])


dnl Start of configure actions..
AC_INIT
AC_CONFIG_SRCDIR([74/7400-1.sym])

dnl Initialize automake stuff
PACKAGE=geda-symbols

DATADIR=gEDA

# new way of doing version
VERSION=20020922

echo Configuring symbols version $VERSION

dnl Change default location for rc files
AC_ARG_WITH(rcdir, [  --with-rcdir=path       Change where the system-*rc files are installed], [opt_rcdir=$withval])

dnl Initialize automake stuff
dnl AM_INIT_AUTOMAKE($PACKAGE, $GEDA_VER_MAJOR.$GEDA_VER_MINOR.$GEDA_VER_MICRO, no-define)
AM_INIT_AUTOMAKE($PACKAGE, $VERSION, no-define)

dnl Create a configuration header
dnl AM_CONFIG_HEADER(config.h)

dnl Build time sanity check...
dnl AM_SANITY_CHECK

dnl Initialize maintainer mode
AM_MAINTAINER_MODE

dnl Checks for programs.
dnl AC_PROG_CC
dnl AC_PROG_LEX
dnl AC_PROG_LEX()
dnl AC_PROG_MAKE_SET

AC_CYGWIN
if test "$CYGWIN" = "yes"; then
	AC_MSG_ERROR(Building gEDA/gaf under cygwin is not supported)
fi

AC_MINGW32

if ! test "$MINGW32" = "no" -o "$MINGW32"x = x; then
	PATHSEP=\\\\
	OTHERPATHSEP=/
else
	PATHSEP=/
	OTHERPATHSEP=\\\\
fi

# search for fig2dev
AC_PATH_PROG(FIG2DEV, fig2dev, no, ${PATH})
if test $FIG2DEV = "no"; then
	echo "Cannot find fig2dev (transfig), some documentation will not be created."
fi

# search for groff
AC_PATH_PROG(GROFF, groff, no, ${PATH})
if test $GROFF = "no"; then
	echo "Cannot find groff, some documentation will not be created."
fi

# search for ps2pdf
AC_PATH_PROG(PS2PDF, ps2pdf, no, ${PATH})
if test $PS2PDF = "no"; then
	echo "Cannot find ps2pdf, some documentation will not be created."
fi


# Do individual library files
  
GEDA_DECLARE_SYMLIB(4000)
GEDA_DECLARE_SYMLIB(national)
GEDA_DECLARE_SYMLIB(local)
GEDA_DECLARE_SYMLIB(io)
GEDA_DECLARE_SYMLIB(analog)
GEDA_DECLARE_SYMLIB(maxim)
GEDA_DECLARE_SYMLIB(verilog)
GEDA_DECLARE_SYMLIB(vhdl)
GEDA_DECLARE_SYMLIB(spice)
GEDA_DECLARE_SYMLIB(connector)
GEDA_DECLARE_SYMLIB(altera)
GEDA_DECLARE_SYMLIB(linear)
GEDA_DECLARE_SYMLIB(switch)
GEDA_DECLARE_SYMLIB(titleblock)
GEDA_DECLARE_SYMLIB(tube)
GEDA_DECLARE_SYMLIB(radio)
GEDA_DECLARE_SYMLIB(micro)
GEDA_DECLARE_SYMLIB(memory)
GEDA_DECLARE_SYMLIB(74)
GEDA_DECLARE_SYMLIB(relay)
GEDA_DECLARE_SYMLIB(diode)
GEDA_DECLARE_SYMLIB(opto)
GEDA_DECLARE_SYMLIB(bus)
GEDA_DECLARE_SYMLIB(supervisor)
GEDA_DECLARE_SYMLIB(lattice)
GEDA_DECLARE_SYMLIB(misc)
GEDA_DECLARE_SYMLIB(transistor)
GEDA_DECLARE_SYMLIB(power)
GEDA_DECLARE_SYMLIB(xilinx)
GEDA_DECLARE_SYMLIB(dec)
GEDA_DECLARE_SYMLIB(rf)
GEDA_DECLARE_SYMLIB(pla)
GEDA_DECLARE_SYMLIB(ecl)
GEDA_DECLARE_SYMLIB(IEC417)
GEDA_DECLARE_SYMLIB(font)
GEDA_DECLARE_SYMLIB(idt)
GEDA_DECLARE_SYMLIB(diode)
GEDA_DECLARE_SYMLIB(opto)

HOME=`echo $HOME`
GEDADATADIR=$datadir/$DATADIR

if eval "test x$opt_rcdir = x"; then
	# path not was specified with --with-rcdir
	GEDARCDIR=$GEDADATADIR
else
	# path WAS specified with --with-rcdir
	GEDARCDIR="$opt_rcdir"
fi

AC_SUBST(datalocal)
AC_SUBST(dataanalog)
AC_SUBST(datamaxim)
AC_SUBST(dataverilog)
AC_SUBST(datavhdl)
AC_SUBST(dataspice)
AC_SUBST(dataconnector)
AC_SUBST(dataaltera)
AC_SUBST(datalinear)
AC_SUBST(dataio)
AC_SUBST(dataswitch)
AC_SUBST(datatitleblock)
AC_SUBST(data4000)
AC_SUBST(datanational)
AC_SUBST(datatube)
AC_SUBST(dataradio)
AC_SUBST(datamemory)
AC_SUBST(datamicro)
AC_SUBST(datapower)
AC_SUBST(datamisc)
AC_SUBST(datatransistor)
AC_SUBST(data74)
AC_SUBST(datarelay)
AC_SUBST(datadiode)
AC_SUBST(dataopto)
AC_SUBST(databus)
AC_SUBST(datasupervisor)
AC_SUBST(datalattice)
AC_SUBST(dataxilinx)
AC_SUBST(datadec)
AC_SUBST(datapla)
AC_SUBST(dataecl)
AC_SUBST(datarf)
AC_SUBST(dataIEC417)
AC_SUBST(datafont)
AC_SUBST(dataidt)

AC_SUBST(HOME)
AC_SUBST(VERSION)
AC_SUBST(GEDADATADIR)
AC_SUBST(GEDARCDIR)
AC_SUBST(PATHSEP)
AC_SUBST(OTHERPATHSEP)

AC_CONFIG_FILES([ 
        Makefile 
	4000/Makefile
	74/Makefile 
	relay/Makefile 
	bus/Makefile 
	supervisor/Makefile 
	lattice/Makefile 
	xilinx/Makefile 
	dec/Makefile 
	pla/Makefile 
	ecl/Makefile 
	rf/Makefile 
	IEC417/Makefile 
	altera/Makefile 
	analog/Makefile 
	connector/Makefile 
	font/Makefile 
	idt/Makefile 
	io/Makefile 
	linear/Makefile 
	local/Makefile
        maxim/Makefile 
	memory/Makefile 
	micro/Makefile 
	misc/Makefile 
	transistor/Makefile 
	power/Makefile 
	radio/Makefile 
	switch/Makefile 
	titleblock/Makefile 
	tube/Makefile 
	verilog/Makefile
	vhdl/Makefile 
	spice/Makefile
	diode/Makefile 
	opto/Makefile 
	national/Makefile
	documentation/Makefile
	system-commonrc
        gesym-config ])
AC_CONFIG_COMMANDS([gesym-config-chmod],[[chmod +x gesym-config]],[[]])
AC_OUTPUT 

